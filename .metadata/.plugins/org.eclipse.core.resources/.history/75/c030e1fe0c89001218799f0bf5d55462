package com.ft.clientetaxi;

import android.content.Context;
import android.content.Intent;

import com.ft.common.AbstractMessenger;
import com.ft.common.SmsSender;
import com.ft.common.protocol.ProtocolManager;
import com.ft.common.protocol.SMSC;

public class TaxiMessenger extends AbstractMessenger{

	public final static String EXTRA_NUMERO = "numero";
	public final static String EXTRA_UBICACION = "dir";
	
	public TaxiMessenger() {
		super(new SmsSender());
		
	}

	@Override
	public void onMessageReceived(String sender, String message, Context context) {
		
		if (ProtocolManager.isSolicitarServicioTaxista(message) && sender.equals(SMSC.SMSC_NUMBER))
		{
			String numero = ProtocolManager.extractNumeroSolicitarServicioTaxista(message);
			String dir = ProtocolManager.extractDireccion(message);
			
			Intent i = new Intent(context, ConfirmarServicioActivity.class);
			i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
			i.putExtra(EXTRA_NUMERO, numero);
			i.putExtra(EXTRA_UBICACION, EXTRA_UBICACION);
			context.startActivity(i);
		}
		
	}

	
}
